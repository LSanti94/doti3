#@IgnoreInspection BashAddShebang
# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see http://i3wm.org/docs/userguide.html for a complete reference!

set $mod Mod4
set $nsi --no-startup-id
set $r --release
set $w --whole-window
workspace_auto_back_and_forth yes

set $bg-color                   #485767
set $fg-color                   #FFFFFF
set $activate-bg-color          #c10101
set $inactive-bg-color          #242C33
set $urgent-bg-color            #F7E610
set $inactive-text-color        #aaaaaa
set $inactive-border-color      #240000
set $status-bg-color            #4c7899
set $status-dark-bg-color       #24364F
et $active-indicator-color     #00FF00
set $inactive-indicator-color   #005500
# before urgent-bg was 242c33

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Inconsolata-g for Powerline Medium 14
# Layout colors                 border                  background              text                    indicator
# ------------------------------------------------------------------------------------------------------------------------------
client.focused                  $activate-bg-color      $bg-color               $fg-color               $active-indicator-color
client.focused_inactive         $inactive-border-color  $inactive-bg-color      $inactive-text-color    $active-indicator-color
client.unfocused                $status-bg-color        $status-dark-bg-color   $inactive-text-color     $inactive-indicator-color
client.urgent                   $inactive-bg-color      $urgent-bg-color        $urgent-bg-color        $inactive-bg-color

client.background               $bg-color

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
# font pango:DejaVu Sans Mono 8

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# resize window (you can also use the mouse for that)
mode " " {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym j resize shrink width 10 px or 10 ppt
        bindsym k resize grow height 10 px or 10 ppt
        bindsym l resize shrink height 10 px or 10 ppt
        bindsym semicolon resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Shift+Left resize shrink width 100 px or 100 ppt
        bindsym Shift+Down resize grow height 100 px or 100 ppt
        bindsym Shift+Up resize shrink height 100 px or 100 ppt
        bindsym Shift+Right resize grow width 100 px or 100 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"

        # alternatively, you can use the cursor keys:
        bindsym Left move left 100 px
        bindsym Down move down 100 px
        bindsym Up move up 100 px
        bindsym Right move right 100 px

}

# *********************************************************************************************************************************************************
#                                                           monitors
# *********************************************************************************************************************************************************


set $left DVI-1
set $right DVI-0

exec $nsi xrandr --output $left --pos 0x0 --output $right --pos 1920x1080 --right-of $left
workspace 1 output $left
workspace 2 output $right
workspace 6 output $left
# *********************************************************************************************************************************************************
#                                                               i3bar
# *********************************************************************************************************************************************************

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
        font pango: Inconsolata-g for Powerline Medium 14#, FontAwesome 14
        tray_output $left
        position top
        output $left

        colors {
            background #576982
            statusline #EEEEEE
            separator #999999

            focused_workspace  #4c7899 #285577 #ffffff
            active_workspace   #333333 #5f676a #ffffff
            inactive_workspace #333333 #222222 #888888
            urgent_workspace   #2f343a #900000 #ffffff
        }   
        status_command i3blocks
    }
bar {
        font pango: Inconsolata-g for Powerline Medium 14
        position top
        output $right
        bindsym button5 exec ~/.i3/scripts/custom_wheel_down
        colors {
            background #24364F
            statusline #CCCCCC
            separator #666666

            focused_workspace  #4c7899 #285577 #ffffff
            active_workspace   #333333 #5f676a #ffffff
            inactive_workspace #333333 #222222 #888888
            urgent_workspace   #2f343a #900000 #ffffff
        }   
        status_command i3blocks  
    }


set $mode_system System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdown
mode "$mode_system" {
    bindsym l exec $nsi sudo /home/existme/bin/i3exit lock, mode "default"
    bindsym e exec $nsi sudo /home/existme/bin/i3exit logout, mode "default"
    bindsym s exec $nsi sudo /home/existme/bin/i3exit suspend, mode "default"
    # use sudo pm-suspend --quirk-radeon-off for suspend
    bindsym h exec $nsi sudo /home/existme/bin/i3exit hibernate, mode "default"
    bindsym r exec $nsi sudo /home/existme/bin/i3exit reboot, mode "default"
    bindsym Shift+s exec $nsi sudo /home/existme/bin/i3exit shutdown, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# *********************************************************************************************************************************************************
#                                                   Fancy Names for workspaces
#                           https://github.com/giacomos/i3wm-config/blob/master/config_work_laptop
# *********************************************************************************************************************************************************

set $w1 1: www
set $w2 2: terminal
set $w3 3: editors
set $w4 4: development
set $w5 5: file manager
set $w6 6: help
set $w7 7: x7
set $w8 8: x8
set $w9 9: x9
set $w0 0: chat-mail

# focus on workspaces
bindsym $mod+1 workspace $w1
bindsym $mod+2 workspace $w2
bindsym $mod+3 workspace $w3
bindsym $mod+4 workspace $w4
bindsym $mod+5 workspace $w5
bindsym $mod+6 workspace $w6
bindsym $mod+7 workspace $w7
bindsym $mod+8 workspace $w8
bindsym $mod+9 workspace $w9
bindsym $mod+0 workspace $w0

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $w1
bindsym $mod+Shift+2 move container to workspace $w2
bindsym $mod+Shift+3 move container to workspace $w3
bindsym $mod+Shift+4 move container to workspace $w4
bindsym $mod+Shift+5 move container to workspace $w5
bindsym $mod+Shift+6 move container to workspace $w6
bindsym $mod+Shift+7 move container to workspace $w7
bindsym $mod+Shift+8 move container to workspace $w8
bindsym $mod+Shift+9 move container to workspace $w9
bindsym $mod+Shift+0 move container to workspace $w0

## Assign sectiond
assign [class="^Firefox$"]                          → $w1
assign [class="^Firefox$"]                          → $w1
assign [window_role="^browser$"]                    → $w1
assign [title="^Print$"]                            → $w1
assign [class="X-terminal-emulator|Terminator"]     → $w2
assign [class="Pidgin"]                             → $w0
assign [class="Buddy List"]                         → $w0
assign [class="^Thunderbird$"]                      → $w0
assign [class="Code"]                               → $w3
assign [class="jetbrains-idea"]                     → $w4
assign [class="Doublecmd"]                          → $w5
assign [class="Yelp"]                               → $w6
assign [class="TkMan"]                              → $w6
for_window [class="^"] focus

# *********************************************************************************************************************************************************
#                                                               Gaps mode
# *********************************************************************************************************************************************************

gaps inner 2
gaps outer 2

# Smart borders (draw borders around container only if it is not the only container on this workspace) 
# on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
# smart_borders on

# Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps. Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace). If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)

mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer"
    bindsym i      mode "$mode_gaps_inner"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}


# *********************************************************************************************************************************************************
#                                                             Float settings
# *********************************************************************************************************************************************************

#fibonacci toggle
# default_orientation vertical 
# for_window [class=".*"] split toggle
# bindsym $mod+shift+q split toggle kill 
# bindsym $mod+alt+e layout toggle split 
new_window normal
#new_window normal
new_float normal
set $fmod "floating enable, border normal, focus, move absolute center"
set $fmod2 "floating enable, border hidden, focus, move absolute center"

for_window [class="^.*"] border pixel 3

for_window [class="Meld|gnome-software|WM_WINDOW_ROLE|do|GV|Onboard-settings|ubuntu-system-settings|P4Merge"] $fmod
for_window [class="Zenity|Wifi-radar|Pavucontrol|Slack|Nitrogen|Gucharmap|Sqliteman|Nautilus|File-roller|Gpick|Font-manager"] $fmod
for_window [class="Thunar|Gnome-software|.*gtk|Pick-colour-picker|Gcolor2"] $fmod
for_window [class="albert"] $fmod2

for_window [class="*" instance="Toplevel|SessionManager|Places|CcOptions"] $fmod
for_window [window_role="pop-up|bubble|task_dialog|Preferences|app|dialog|menu|utility"] $fmod
for_window [window_role="toolbar|splash|dropdown_menu|notification|popup_menu|tooltip"] $fmod
for_window [window_role="^$"] $fmod
for_window [title="[Oo]ptions|[Ff]ind files"] $fmod
for_window [title="^About.*"] $fmod
for_window [class="vscode-color-ui"] floating enable

#hide_edge_borders none

# *********************************************************************************************************************************************************
#                                                           Standard key bindings
# *********************************************************************************************************************************************************

bindsym $mod+h split h
bindsym $mod+v split v; mark "lastsplit"
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle
# focus the parent container
bindsym $mod+a focus parent
# focus the child container
#bindsym $mod+d focus child

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left 100 px
bindsym $mod+Shift+Down move down 100 px
bindsym $mod+Shift+Up move up 100 px
bindsym $mod+Shift+Right move right 100 px


# *********************************************************************************************************************************************************
#                                                             Key Bindings
# *********************************************************************************************************************************************************

# Language selection
bindsym --release Caps_Lock exec pkill -SIGRTMIN+11 i3blocks
bindsym --release Num_Lock  exec pkill -SIGRTMIN+11 i3blocks

#bindsym F1 exec $nsi "default"

# Toggle border
bindsym $mod+y exec $nsi i3-msg border toggle

# ************************************************************************************************************
# Rofi
bindsym $mod+Next exec "/usr/bin/rofi -combi-modi window,drun -show combi -modi combi"
# htop
bindsym $mod+F1 exec $nsi "/usr/bin/terminator -l big -T '**SUDO** HTOP: Beaware that you can kill anything!!!' -r pop-up -e 'sudo htop'", focus
bindsym $mod+shift+n exec $nsi "/usr/bin/thunar", focus
# thunar
# bindsym $mod+
# ************************************************************************************************************

# Scratch pad
bindsym $mod+Shift+KP_Subtract move scratchpad
bindsym $mod+KP_Subtract scratchpad show

bindsym $mod+Pause mode "$mode_system"
bindsym $mod+x exec "/home/existme/bin/dump-asy.pl 3"
bindsym --release button2 kill
bindsym $mod+button2 floating toggle
bindsym $mod+o move window to mark "lastsplit"
bindsym $mod+p exec "notify-send \\"Hello, i3; from $USER\\""

# Resize
bindsym $mod+Control+r exec i3-input -F 'rename workspace to "%s"' -P 'New name: '

# Volume
bindsym XF86AudioRaiseVolume exec "amixer -q sset Master,0 2.091db+ unmute && /home/existme/bin/unmute" exec "pkill -SIGRTMIN+11 i3blocks"
bindsym XF86AudioLowerVolume exec "amixer -q sset Master,0 2.097db- unmute && /home/existme/bin/unmute" exec "pkill -SIGRTMIN+11 i3blocks"
bindsym XF86AudioMute exec "/home/existme/bin/unmute && amixer -q sset Master,0 toggle && pkill -SIGRTMIN+11 i3blocks"

# Media
bindsym XF86AudioPlay exec playerctl play-pause  
bindsym XF86AudioNext exec playerctl next  
bindsym XF86AudioPrev exec playerctl previous  

# kill focused window
bindsym $mod+q kill

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

bindsym $mod+r mode " "
bindsym $mod+Shift+g mode "$mode_gaps"

# Switch to next or previous workspace
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev
bindsym $mod+Control+Right workspace next
bindsym $mod+Control+Left workspace prev

# screen lock
bindsym $mod+l exec "/home/existme/bin/locki3"
exec $nsi "xautolock -time 10 -locker /home/existme/bin/locki3 &"
exec $nsi "xautolock -time 30 -locker 'sudo /home/existme/bin/i3exit suspend' &"

# start a terminal
bindsym $mod+Return exec "terminator"

set $size 100 px or 100 ppt
bindsym $mod+Shift+Next  resize grow height $size,resize grow width $size
bindsym $mod+Shift+Prior resize shrink height $size,resize shrink width $size
bindsym $mod+d exec rofi -show run

# workspace arrangement
exec i3-msg "workspace number 1 layout tabbed"
exec i3-msg "workspace number 3, layout tabbed"
exec i3-msg "workspace number 4, layout tabbed"
exec i3-msg "workspace number 5, layout tabbed"

# *********************************************************************************************************************************************************
#                                                           StartUp
# *********************************************************************************************************************************************************

# Keyboard layout
exec "setxkbmap -layout us,ir -option grp:caps_toggle"

exec $nsi "nitrogen --restore"
exec $nsi "/usr/bin/terminator"

#exec "/usr/bin/code"

#exec $nsi "/usr/bin/doublecmd"
exec $nsi "/usr/bin/nm-applet"
# i3-msg exec $nsi pasystray
exec $nsi "/usr/bin/volumeicon"
# i3-msg exec $nsi gnome-sound-applet
# exec $nsi "/usr/bin/albert"
exec $nsi "/usr/bin/thunar --daemon"
exec $nsi "/usr/local/bin/toolbox --minimize"
# gnome-settings-daemon
# i3-msg exec $nsi thunderbird
# exec "sleep 2; /usr/bin/google-chrome"
# exec "sleep 30; /usr/bin/firefox"
# /home/existme/bin/i3-exec-wait.pl -n 3 code ~/.config/i3/config;
exec "/home/existme/bin/i3-exec-wait.pl -n 3 /home/existme/local/firefox;
    /home/existme/bin/i3-exec-wait.pl -n 3 google-chrome;    
    sleep 7;
    /home/existme/bin/rearrange;/home/existme/bin/rearrange;"
# exec_always "~/bin/refresh"
#exec_always "sleep 5;~/bin/rearrange;~/bin/rearrange"
