#!/bin/bash
# set -xe
# /etc/X11/xinit/xinitrc
#
# global xinitrc file, used by all X sessions started by xinit (startx)

# invoke global X session script
# export STARTUP="init --user"
# export STARTUP="echo ok"
echo $STARTUP
$HOME/bin/flog -st "~/.xinitrc2"

xrdb -load "$HOME/.Xdefaults"
xrdb -merge "$HOME/.Xresources"
[[ -f ~/.XresourcesLocal ]] && xrdb -merge "$HOME/.XresourcesLocal"

xset +fp "$HOME/.fonts"
xset fp rehash
$HOME/bin/flog "fonts rehashed"

(. /etc/X11/Xsession) || true

xsetroot -solid "#333333"

# use gnome-keyring-daemon to manage keys
/usr/bin/gnome-keyring-daemon --start --components=gpg
/usr/bin/gnome-keyring-daemon --start --components=ssh

# dunst -config ~/.config/dunst/dunstrc
killall dunst; dunst &
$HOME/bin/flog "dunst loaded"

# mate-settings-daemon --replace
setxkbmap -layout us,ir -option grp:caps_toggle

xautolock &
pasystray &
nitrogen --restore

$HOME/bin/flog "nitrogen restored"

killall i3-mousemon;$HOME/bini3/i3-mousemon &
killall xbindkeys;/usr/bin/xbindkeys &

killall redshift-gtk; redshift-gtk &

# disable caps lock
setxkbmap -option ctrl:nocaps
notify-send -c 'info' 'xinitrc' 'xinitrc loaded :)' -i dialog-information

$HOME/bin/flog -se "~/.xinitrc2"

